<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>测试页面</title>
    <style type="text/css">
        *{
            margin: 0;
            padding: 0;
        }
        /*#scroll{*/
        /*    width: 600px;*/
        /*    height: 1100px;*/
        /*    overflow: auto;*/
        /*}*/
        .page{position:relative; width:600px; height:1000px; border:1px solid black; page-break-before: always;}
        .page .foot{font-size: 14px; width: 100%; position: absolute; bottom: 8px;}
        .page .center{text-align: center !important;}
    </style>
    <script type="text/javascript" src="../dist/wings-booklet.js"></script>
</head>
<body>
    <div style="text-align: center">
        <h1>测试内容</h1>
        <h4>打开控制台查看输出内容</h4>
    </div>

    <div id="scroll">
        <div class="page">
            <div>第一页</div>
            <div class="foot center"><span>第 1 页 共 18 页</span></div>
        </div>
        <div class="page">
            <div>第二页</div>
            <div class="foot center"><span>第 2 页 共 18 页</span></div>
        </div>
        <div class="page">
            <div>第三页</div>
            <div class="foot center"><span>第 3 页 共 18 页</span></div>
        </div>
        <div class="page">
            <div>第四页</div>
            <div class="foot center"><span>第 4 页 共 18 页</span></div>
        </div>
        <div class="page">
            <div>第五页</div>
            <div class="foot center"><span>第 5 页 共 18 页</span></div>
        </div>
        <div class="page">
            <div>第六页</div>
            <div class="foot center"><span>第 6 页 共 18 页</span></div>
        </div>
        <div class="page">
            <div>第七页</div>
            <div class="foot center"><span>第 7 页 共 18 页</span></div>
        </div>
        <div class="page">
            <div>第八页</div>
            <div class="foot center"><span>第 8 页 共 18 页</span></div>
        </div>
        <div class="page">
            <div>第九页</div>
            <div class="foot center"><span>第 9 页 共 18 页</span></div>
        </div>
        <div class="page">
            <div>第十页</div>
            <div class="foot center"><span>第 10 页 共 18 页</span></div>
        </div>
        <div class="page">
            <div>第十一页</div>
            <div class="foot center"><span>第 11 页 共 18 页</span></div>
        </div>
        <div class="page">
            <div>第十二页</div>
            <div class="foot center"><span>第 12 页 共 18 页</span></div>
        </div>
        <div class="page">
            <div>第十三页</div>
            <div class="foot center"><span>第 13 页 共 18 页</span></div>
        </div>
        <div class="page">
            <div>第十四页</div>
            <div class="foot center"><span>第 14 页 共 18 页</span></div>
        </div>
        <div class="page">
            <div>第十五页</div>
            <div class="foot center"><span>第 15 页 共 18 页</span></div>
        </div>
        <div class="page">
            <div>第十六页</div>
            <div class="foot center"><span>第 16 页 共 18 页</span></div>
        </div>
        <div class="page">
            <div>第十七页</div>
            <div class="foot center"><span>第 17 页 共 18 页</span></div>
        </div>
        <div class="page">
            <div>第十八页</div>
            <div class="foot center"><span>第 18 页 共 18 页</span></div>
        </div>
    </div>
</body>
<script type="text/javascript">
    let booklet = new WingsBooklet({
        scrollDom: document.body,
        className: "page",
        direction: "vertical",
        easeType: "easeOutBounce",
        flipDuration: 2000,
        turnPage: turnPage,
        beforeFlipPage: beforeFlipPage,
        afterFlipPage: afterFlipPage
    });

    //滚动翻页后回调(滚动翻页时触发)
    function turnPage(pastIndex, currentIndex) {
        console.log("turnPage", `从 ${pastIndex} 到 ${currentIndex}`);
    }

    //跳转开始前回调（跳转某页开始前触发）
    function beforeFlipPage(currentIndex) {
        console.log("beforeFlipPage", `当前是 ${currentIndex}`);
    }

    //跳转结束后回调（跳转某页结束后触发）
    function afterFlipPage(currentIndex) {
        console.log("afterFlipPage", `当前是 ${currentIndex}`);
    }

    //改变page的高度
    function changePageHeight() {
        let domArr = document.getElementsByClassName("page");
        domArr = Array.prototype.slice.call(domArr);

        domArr.forEach(o => {
            o.style.height = 900;
        })
    }

    //删除某一页
    function removeOnePage(pageIndex){
        let domArr = document.getElementsByClassName("page");
        domArr = Array.prototype.slice.call(domArr);
        let dom = domArr[pageIndex];
        dom.remove();
    }

    setTimeout(() => {
        /**
         *  删除某一页或者改变页面的高度，flipTo不能跳转到新的位置。
         *  刷新小册子后，flipTo才能跳转到新的位置。
         */
        changePageHeight();
        removeOnePage(0);
        booklet.refresh();
    }, 3000);

    setTimeout(() => {
        booklet.flipTo(5);
    }, 6000);

    setTimeout(() => {
        booklet.flipTo(0);
    }, 9000);

</script>
</html>
